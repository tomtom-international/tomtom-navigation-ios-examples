# TomTom Navigation iOS SDK Examples

Hello and welcome to this repository with examples showcasing the [TomTom Navigation SDK for iOS].

> **Note** Navigation SDK for iOS is only available upon request. In order to get access, [contact us].

<div align="center">
  <img align="center" src=".github/nav-sdk-phone.png" width="400"/>
</div>

## Development setup

Once you have gained access, set up the development environment by following:

1. Install [Xcode](https://apps.apple.com/app/id497799835) 14 or higher if you don't already have it.

2. We recommend using `rbenv` to handle `ruby` selection/installation.
   1. Install `rbenv`   
   ```zsh
   brew install rbenv
   ```
   2. Clone the [tomtom-navigation-ios-examples] repository
   ```zsh
   git clone https://github.com/tomtom-international/tomtom-navigation-ios-examples.git
   ```   
   3. Change directory to the recently cloned repository and install `ruby` via `rbenv`
   ```zsh
   cd tomtom-navigation-ios-examples
   rbenv install
   ```
   4. Load `rbenv` to your shell
   ```zsh
   echo 'eval "$(rbenv init - zsh)"' >> ~/.zshrc
   ```
   Above command assumes that `zsh` is being used. If a different shell is being used, then you can find 
   commands for most common shells in [rbenv documentation].

   5. Update `bundler`
   ```zsh
   gem install bundler -v 2.3.23
   ```
   6. Ensure you ***reload*** your shell so the `rbenv` can extend `PATH` accordingly.

3. Install project's `gem` dependencies via `bundler`
   ```zsh
   bundle install
   ```

4. Use the credentials obtained from `TomTom` to login to [Artifactory] and generate an identity token.
   Identity tokens can be generated by expanding the user menu in the top-right corner, and select 
   `"Edit profile" → "Generate an Identity Token"`.
   The identity token will be used to manage the access to private iOS [Cocoapods].
   Access can be managed via a `.netrc` file. Create or extend a local `~/.netrc` with the following snippet:
   ```
   machine repositories.tomtom.com
   login <YOUR_EMAIL_ADDRESS>
   password <YOUR_TOKEN>
   ``` 

5. Add a reference to the [Cocoapods] private repository:
   ```zsh
   bundle exec pod repo-art add tomtom-sdk-cocoapods "https://repositories.tomtom.com/artifactory/api/pods/cocoapods"
   ```

6. Install the dependencies by executing the following command in **the project folder**.
    ```
    bundle exec pod install
    ```

7. To update the SDK version, run the command:
    ```
    bundle exec pod repo-art update tomtom-sdk-cocoapods
    ```
8. Open the project’s `xcworkspace` and start developing your awesome application.

## API Keys

Make sure you have the appropriate TomTom API key. If you don’t have an API Key, go to [How to get a TomTom API Key](https://developer.tomtom.com/how-to-get-tomtom-api-key) to learn how to create one. Using an invalid API key will cause issues loading the map or running navigation.

Change your API key in the `Keys.swift` file. 

```swift
enum Keys {
    static let apiKey = "YOUR_API_KEY"
}
```

## Troubleshooting
If you have a **black screen** when launching the Basic driving app, please follow the steps below.

- Check that you have updated the `API key` with yours in the `Keys.swift` file.
- Check that your `API key` is valid for the requested features
- Check your internet connection

---

If you get a warning about the device's architecture, please follow the steps below.
```
Warning: Error creating LLDB target at path '*' using an empty LLDB target which can cause slow memory reads from remote devices: the specified architecture 'arm64-*-*' is not compatible with 'x86_64-apple-ios*' 
```

### Apple M1 and M2 processor support

Xcode requires a specific setup to support TomTom SDK on Apple M1 and M2 processors devices.
The existing frameworks are optimized for Intel processors. Apple introduced Rosetta to emulate devices with
Apple M1 and M2 processors, using Intel processors for backward compatibility.

Please follow the steps below to run Rosetta during the build process:

1. Skip this section if your device uses an Intel processor:
- go to `Apple Menu` -> `About This Mac` to check
2. Automatically open Xcode using Rosetta:
- go to `Applications` -> `Xcode` -> `Right mouse click` (control + click) -> `Get Info`
- check the flag `Open using Rosetta`

---

[contact us]: https://developer.tomtom.com/tomtom-sdk-for-ios/request-access
[rbenv documentation]: https://github.com/rbenv/rbenv#readme
[tomtom-navigation-ios-examples]: https://github.com/tomtom-international/tomtom-navigation-ios-examples
[Artifactory]: https://repositories.tomtom.com/ui
[Cocoapods]: (https://guides.cocoapods.org/using/getting-started.html)
[TomTom Navigation SDK for iOS]: https://developer.tomtom.com/ios/navigation/documentation/overview/introduction
